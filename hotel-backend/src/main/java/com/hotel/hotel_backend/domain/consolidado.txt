üìÇ Estructura del proyecto (.):
-----------------------------------
.
‚îú‚îÄ‚îÄ consolidado.txt
‚îú‚îÄ‚îÄ Direccion.java
‚îú‚îÄ‚îÄ Estadia.java
‚îú‚îÄ‚îÄ Factura.java
‚îú‚îÄ‚îÄ Habitacion.java
‚îú‚îÄ‚îÄ Huesped.java
‚îú‚îÄ‚îÄ MedioDePago
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Cheque.java
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Efectivo.java
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ MedioDePago.java
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ MonedaExtranjera.java
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Tarjeta.java
‚îú‚îÄ‚îÄ NotaDeCredito.java
‚îú‚îÄ‚îÄ Pago.java
‚îú‚îÄ‚îÄ Persona.java
‚îú‚îÄ‚îÄ Reserva.java
‚îú‚îÄ‚îÄ ResponsableDePago
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ResponsableDePago.java
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ResponsableHuesped.java
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ResponsableJuridico.java
‚îî‚îÄ‚îÄ Usuario.java

3 directories, 19 files

-----------------------------------

// [Direccion.java]
package com.hotel.hotel_backend.domain;

import com.hotel.hotel_backend.dto.DireccionDTO;

import jakarta.persistence.Embeddable;

@Embeddable
public class Direccion {
    private String calle;
    private String numero;
    private String departamento;
    private String piso;
    private String codigoPostal;
    private String localidad;
    private String provincia;
    private String pais;

    public Direccion() {}

    public Direccion(String calle, String numero, String departamento, String piso,
                     String codigoPostal, String localidad, String provincia, String pais) {
        this.calle = calle;
        this.numero = numero;
        this.departamento = departamento;
        this.piso = piso;
        this.codigoPostal = codigoPostal;
        this.localidad = localidad;
        this.provincia = provincia;
        this.pais = pais;
    }

    // Getters y setters
    public String getCalle() { return calle; }
    public void setCalle(String calle) { this.calle = calle; }

    public String getNumero() { return numero; }
    public void setNumero(String numero) { this.numero = numero; }

    public String getDepartamento() { return departamento; }
    public void setDepartamento(String departamento) { this.departamento = departamento; }

    public String getPiso() { return piso; }
    public void setPiso(String piso) { this.piso = piso; }

    public String getCodigoPostal() { return codigoPostal; }
    public void setCodigoPostal(String codigoPostal) { this.codigoPostal = codigoPostal; }

    public String getLocalidad() { return localidad; }
    public void setLocalidad(String localidad) { this.localidad = localidad; }

    public String getProvincia() { return provincia; }
    public void setProvincia(String provincia) { this.provincia = provincia; }

    public String getPais() { return pais; }
    public void setPais(String pais) { this.pais = pais; }

    public static DireccionDTO mapearDireccionADTO(Direccion direccion) {
        return new DireccionDTO(direccion.getCalle(), direccion.getNumero(), 
                                direccion.getDepartamento(), direccion.getPiso(), 
                                direccion.getCodigoPostal(), direccion.getLocalidad(), 
                                direccion.getProvincia(), direccion.getPais());
    }

    public static Direccion mapearDireccionDominio(DireccionDTO dto) {
        if (dto == null) return null;
        return new Direccion(
            dto.getCalle(),
            dto.getNumero(),
            dto.getDepartamento(),
            dto.getPiso(),
            dto.getCodigoPostal(),
            dto.getLocalidad(),
            dto.getProvincia(),
            dto.getPais()
        );
    }
}


// [Estadia.java]
// src/main/java/com/hotel/hotel_backend/domain/Estadia.java
package com.hotel.hotel_backend.domain;

import java.time.LocalDate;
import java.time.LocalTime;
import java.util.List;

import jakarta.persistence.*;

@Entity
@Table(name = "estadia")
public class Estadia {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "estadia_id")
    private Integer id;

    @Column(name = "fecha_inicio", nullable = false)
    private LocalDate fechaCheckIn;

    @Column(name = "hora_inicio")
    private LocalTime horaCheckIn;

    // ‚úÖ Ahora permiten NULL hasta el check-out
    @Column(name = "fecha_fin")
    private LocalDate fechaCheckOut;

    @Column(name = "hora_fin")
    private LocalTime horaCheckOut;

    @Column(nullable = false)
    private String estado;

    @ManyToOne
    @JoinColumn(name = "reserva_id", nullable = false)
    private Reserva reserva;

    @ManyToOne
    @JoinColumn(name = "titular_id")
    private Huesped titular;

    @ManyToMany
    @JoinTable(
            name = "estadia_acompaniantes",
            joinColumns = @JoinColumn(name = "estadia_id"),
            inverseJoinColumns = @JoinColumn(name = "acompaniante_id")
    )
    private List<Huesped> acompaniantes;

    public Estadia() {}

    public Estadia(Integer id,
                   LocalDate fechaCheckIn,
                   LocalTime horaCheckIn,
                   LocalDate fechaCheckOut,
                   LocalTime horaCheckOut,
                   String estado,
                   Reserva reserva,
                   Huesped titular,
                   List<Huesped> acompaniantes
    ) {
        this.id = id;
        this.fechaCheckIn = fechaCheckIn;
        this.horaCheckIn = horaCheckIn;
        this.fechaCheckOut = fechaCheckOut;
        this.horaCheckOut = horaCheckOut;
        this.estado = estado;
        this.reserva = reserva;
        this.titular = titular;
        this.acompaniantes = acompaniantes;
    }

    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }

    public LocalDate getFechaCheckIn() { return fechaCheckIn; }
    public void setFechaCheckIn(LocalDate fechaCheckIn) { this.fechaCheckIn = fechaCheckIn; }

    public LocalTime getHoraCheckIn() { return horaCheckIn; }
    public void setHoraCheckIn(LocalTime horaCheckIn) { this.horaCheckIn = horaCheckIn; }

    public LocalDate getFechaCheckOut() { return fechaCheckOut; }
    public void setFechaCheckOut(LocalDate fechaCheckOut) { this.fechaCheckOut = fechaCheckOut; }

    public LocalTime getHoraCheckOut() { return horaCheckOut; }
    public void setHoraCheckOut(LocalTime horaCheckOut) { this.horaCheckOut = horaCheckOut; }

    public String getEstado() { return estado; }
    public void setEstado(String estado) { this.estado = estado; }

    public Reserva getReserva() { return reserva; }
    public void setReserva(Reserva reserva) { this.reserva = reserva; }

    public Huesped getTitular() { return titular; }
    public void setTitular(Huesped titular) { this.titular = titular; }

    public List<Huesped> getAcompaniantes() { return acompaniantes; }
    public void setAcompaniantes(List<Huesped> acompaniantes) { this.acompaniantes = acompaniantes; }
}



// [Factura.java]
// [src/main/java/com/hotel/hotel_backend/domain/Factura.java]
package com.hotel.hotel_backend.domain;

import java.time.LocalDate;
import java.time.LocalTime;
import java.util.List;

import com.hotel.hotel_backend.domain.ResponsableDePago.ResponsableDePago;
import com.hotel.hotel_backend.domain.MedioDePago.MedioDePago;

import jakarta.persistence.*;

@Entity
@Table(name = "factura")
public class Factura {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "factura_id")
    private Integer id;

    @Column(nullable = false)
    private LocalTime hora;

    @Column(nullable = false)
    private LocalDate fecha;

    private String tipo;
    private String estado;

    // ============================
    //   RESPONSABLE DE PAGO (SIN CASCADE)
    // ============================
    @ManyToOne
    @JoinColumn(name = "responsable_de_pago_id")
    private ResponsableDePago responsableDePago;

    // ============================
    //   MEDIO DE PAGO (SIN CASCADE)
    // ============================
    @ManyToOne
    @JoinColumn(name = "medio_de_pago_id")
    private MedioDePago medioDePago;

    // ============================
    //   ESTAD√çA (SIN CASCADE)
    // ============================
    @ManyToOne
    @JoinColumn(name = "estadia_id")
    private Estadia estadia;

    // ============================
    //   PAGOS (cascade ALL)
    // ============================
    @OneToMany(mappedBy = "factura", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Pago> pagos;

    private double total;
    private double iva;
    private String detalle;

    @Column(name = "hora_salida")
    private LocalTime horaSalida;

    // ============================
    //       CONSTRUCTORES
    // ============================
    public Factura() {}

    public Factura(Integer id,
                   LocalTime hora,
                   LocalDate fecha,
                   String tipo,
                   String estado,
                   ResponsableDePago responsableDePago,
                   MedioDePago medioDePago,
                   Estadia estadia,
                   List<Pago> pagos,
                   double total,
                   double iva,
                   String detalle,
                   LocalTime horaSalida) {

        this.id = id;
        this.hora = hora;
        this.fecha = fecha;
        this.tipo = tipo;
        this.estado = estado;
        this.responsableDePago = responsableDePago;
        this.medioDePago = medioDePago;
        this.estadia = estadia;
        this.pagos = pagos;
        this.total = total;
        this.iva = iva;
        this.detalle = detalle;
        this.horaSalida = horaSalida;

        if (pagos != null) {
            pagos.forEach(p -> p.setFactura(this));
        }
    }

    // ============================
    //        GETTERS / SETTERS
    // ============================

    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }

    public LocalTime getHora() { return hora; }
    public void setHora(LocalTime hora) { this.hora = hora; }

    public LocalDate getFecha() { return fecha; }
    public void setFecha(LocalDate fecha) { this.fecha = fecha; }

    public String getTipo() { return tipo; }
    public void setTipo(String tipo) { this.tipo = tipo; }

    public String getEstado() { return estado; }
    public void setEstado(String estado) { this.estado = estado; }

    public ResponsableDePago getResponsableDePago() { return responsableDePago; }
    public void setResponsableDePago(ResponsableDePago responsableDePago) { this.responsableDePago = responsableDePago; }

    public MedioDePago getMedioDePago() { return medioDePago; }
    public void setMedioDePago(MedioDePago medioDePago) { this.medioDePago = medioDePago; }

    public Estadia getEstadia() { return estadia; }
    public void setEstadia(Estadia estadia) { this.estadia = estadia; }

    public List<Pago> getPagos() { return pagos; }
    public void setPagos(List<Pago> pagos) {
        this.pagos = pagos;
        if (pagos != null) {
            pagos.forEach(p -> p.setFactura(this));
        }
    }

    public double getTotal() { return total; }
    public void setTotal(double total) { this.total = total; }

    public double getIva() { return iva; }
    public void setIva(double iva) { this.iva = iva; }

    public String getDetalle() { return detalle; }
    public void setDetalle(String detalle) { this.detalle = detalle; }

    public LocalTime getHoraSalida() { return horaSalida; }
    public void setHoraSalida(LocalTime horaSalida) { this.horaSalida = horaSalida; }
}



// [Habitacion.java]
package com.hotel.hotel_backend.domain;

import jakarta.persistence.*;

@Entity
@Table(name = "habitacion")
public class Habitacion {

    @Id
    @Column(name = "numero_habitacion")
    private Integer numero;

    private String tipo;      // INDIVIDUAL, DOBLE, SUPERIOR, etc.
    private String categoria; // Estandar, Superior, Family, Suite

    @Column(name = "costo_por_noche")
    private double costoPorNoche;

    private String estado; 
    // Disponible - Reservada - Ocupada - FueraDeServicio

    public Habitacion() {}

    public Habitacion(Integer numero, String tipo, String categoria, double costoPorNoche, String estado) {
        this.numero = numero;
        this.tipo = tipo;
        this.categoria = categoria;
        this.costoPorNoche = costoPorNoche;
        this.estado = estado;
    }

    public Integer getNumero() { return numero; }
    public void setNumero(Integer numero) { this.numero = numero; }

    public String getTipo() { return tipo; }
    public void setTipo(String tipo) { this.tipo = tipo; }

    public String getCategoria() { return categoria; }
    public void setCategoria(String categoria) { this.categoria = categoria; }

    public double getCostoPorNoche() { return costoPorNoche; }
    public void setCostoPorNoche(double costoPorNoche) { this.costoPorNoche = costoPorNoche; }

    public String getEstado() { return estado; }
    public void setEstado(String estado) { this.estado = estado; }
}



// [Huesped.java]
package com.hotel.hotel_backend.domain;

import jakarta.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "huesped")
public class Huesped {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "huesped_id")
    private Long id;
    
    @Column(name = "numero_documento")
    private String numeroDocumento;
    private String apellido;
    private String nombre;
    private String tipoDocumento;
    private String cuit;
    @Embedded
    private Direccion direccion;  // Composici√≥n
    private String email;
    private String ocupacion;
    private String nacionalidad;
    private String telefono;
    private LocalDate fechaNacimiento;
    public Huesped() {
    }

    public Huesped(String apellido, String nombre, String tipoDocumento, String numeroDocumento,
                   String cuit, Direccion direccion,
                   String email, String ocupacion, String nacionalidad, String telefono, LocalDate fechaNacimiento) {
        this.apellido = apellido;
        this.nombre = nombre;
        this.tipoDocumento = tipoDocumento;
        this.numeroDocumento = numeroDocumento;
        this.cuit = cuit;
        this.direccion = direccion;
        this.email = email;
        this.ocupacion = ocupacion;
        this.nacionalidad = nacionalidad;
        this.telefono = telefono;
        this.fechaNacimiento = fechaNacimiento;
    }

    // ======== Getters y Setters ========

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getApellido() {
        return apellido;
    }

    public void setApellido(String apellido) {
        this.apellido = apellido;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getTipoDocumento() {
        return tipoDocumento;
    }

    public void setTipoDocumento(String tipoDocumento) {
        this.tipoDocumento = tipoDocumento;
    }

    public String getNumeroDocumento() {
        return numeroDocumento;
    }

    public void setNumeroDocumento(String numeroDocumento) {
        this.numeroDocumento = numeroDocumento;
    }

    public String getCuit() {
        return cuit;
    }

    public void setCuit(String cuit) {
        this.cuit = cuit;
    }


    public Direccion getDireccion() {
        return direccion;
    }

    public void setDireccion(Direccion direccion) {
        this.direccion = direccion;
    }


    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getOcupacion() {
        return ocupacion;
    }

    public void setOcupacion(String ocupacion) {
        this.ocupacion = ocupacion;
    }

    public String getNacionalidad() {
        return nacionalidad;
    }

    public void setNacionalidad(String nacionalidad) {
        this.nacionalidad = nacionalidad;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public LocalDate getFechaNacimiento() {
        return fechaNacimiento;
    }

    public void setFechaNacimiento(LocalDate fechaNacimiento) {
        this.fechaNacimiento = fechaNacimiento;
    }
    

}


// [MedioDePago/Cheque.java]
package com.hotel.hotel_backend.domain.MedioDePago;

import jakarta.persistence.DiscriminatorValue;
import jakarta.persistence.Entity;

@Entity
@DiscriminatorValue("cheque")
public class Cheque extends MedioDePago {

    private String numero;
    private String fechaVencimiento;

    public Cheque() {}

    public Cheque(String numero, double monto, String fechaVencimiento) {
        super(monto);
        this.numero = numero;
        this.fechaVencimiento = fechaVencimiento;
    }

    @Override
    public String getTipo() {
        return "cheque";
    }

    public String getNumero() { return numero; }
    public void setNumero(String numero) { this.numero = numero; }

    public String getFechaVencimiento() { return fechaVencimiento; }
    public void setFechaVencimiento(String fechaVencimiento) { this.fechaVencimiento = fechaVencimiento; }
}



// [MedioDePago/Efectivo.java]
package com.hotel.hotel_backend.domain.MedioDePago;

import jakarta.persistence.DiscriminatorValue;
import jakarta.persistence.Entity;

@Entity
@DiscriminatorValue("efectivo")
public class Efectivo extends MedioDePago {

    public Efectivo() {}

    public Efectivo(double monto) {
        super(monto);
    }

    @Override
    public String getTipo() {
        return "efectivo";
    }
}



// [MedioDePago/MedioDePago.java]
// [src/main/java/com/hotel/hotel_backend/domain/MedioDePago/MedioDePago.java]
package com.hotel.hotel_backend.domain.MedioDePago;

import jakarta.persistence.*;

@Entity
@Table(name = "medio_de_pago")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "tipo", discriminatorType = DiscriminatorType.STRING)
public abstract class MedioDePago {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "medio_pago_id")
    private Integer id;

    private double monto;

    public MedioDePago() {}

    public MedioDePago(double monto) {
        this.monto = monto;
    }

    public Integer getId() { return id; }

    public double getMonto() { return monto; }
    public void setMonto(double monto) { this.monto = monto; }

    public abstract String getTipo();
}



// [MedioDePago/MonedaExtranjera.java]
package com.hotel.hotel_backend.domain.MedioDePago;

import jakarta.persistence.DiscriminatorValue;
import jakarta.persistence.Entity;

@Entity
@DiscriminatorValue("monedaExtranjera")
public class MonedaExtranjera extends MedioDePago {

    private String tipoMoneda;
    private double montoExtranjero;
    private double cotizacion;

    public MonedaExtranjera() {}

    public MonedaExtranjera(String tipoMoneda, double montoExtranjero,
                            double cotizacion, double monto) {
        super(monto);
        this.tipoMoneda = tipoMoneda;
        this.montoExtranjero = montoExtranjero;
        this.cotizacion = cotizacion;
    }

    @Override
    public String getTipo() {
        return "monedaExtranjera";
    }

    public String getTipoMoneda() { return tipoMoneda; }
    public void setTipoMoneda(String tipoMoneda) { this.tipoMoneda = tipoMoneda; }

    public double getMontoExtranjero() { return montoExtranjero; }
    public void setMontoExtranjero(double montoExtranjero) { this.montoExtranjero = montoExtranjero; }

    public double getCotizacion() { return cotizacion; }
    public void setCotizacion(double cotizacion) { this.cotizacion = cotizacion; }
}



// [MedioDePago/Tarjeta.java]
package com.hotel.hotel_backend.domain.MedioDePago;

import jakarta.persistence.DiscriminatorValue;
import jakarta.persistence.Entity;

@Entity
@DiscriminatorValue("tarjeta")
public class Tarjeta extends MedioDePago {

    private String tipoTarjeta;
    private String numeroTarjeta;

    public Tarjeta() {}

    public Tarjeta(String tipoTarjeta, String numeroTarjeta, double monto) {
        super(monto);
        this.tipoTarjeta = tipoTarjeta;
        this.numeroTarjeta = numeroTarjeta;
    }

    @Override
    public String getTipo() {
        return "tarjeta";
    }

    public String getTipoTarjeta() { return tipoTarjeta; }
    public void setTipoTarjeta(String tipoTarjeta) { this.tipoTarjeta = tipoTarjeta; }

    public String getNumeroTarjeta() { return numeroTarjeta; }
    public void setNumeroTarjeta(String numeroTarjeta) { this.numeroTarjeta = numeroTarjeta; }
}



// [NotaDeCredito.java]
package com.hotel.hotel_backend.domain;

import com.hotel.hotel_backend.domain.ResponsableDePago.ResponsableDePago;

import jakarta.persistence.*;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "nota_de_credito")
public class NotaDeCredito {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id_nota")
    private Integer idNota;

    @Column(name = "fecha", nullable = false)
    private LocalDate fecha;

    @ManyToOne
    @JoinColumn(name = "responsable_de_pago_id")
    private ResponsableDePago responsable;

    @ManyToMany
    @JoinTable(
        name = "nota_factura",
        joinColumns = @JoinColumn(name = "nota_id"),
        inverseJoinColumns = @JoinColumn(name = "factura_id")
    )
    private List<Factura> facturas = new ArrayList<>();

    private String tipo;

    public NotaDeCredito() {
        // Constructor vac√≠o necesario para JPA
    }

    public NotaDeCredito(Integer idNota, LocalDate fecha,
                         ResponsableDePago responsable,
                         List<Factura> facturas,
                         String tipo) {

        this.idNota = idNota;
        this.fecha = fecha != null ? fecha : LocalDate.now();
        this.responsable = responsable;
        this.facturas = facturas != null ? facturas : new ArrayList<>();
        this.tipo = tipo;
    }

    public Integer getIdNota() { return idNota; }
    public void setIdNota(Integer idNota) { this.idNota = idNota; }

    public LocalDate getFecha() { return fecha; }
    public void setFecha(LocalDate fecha) { this.fecha = fecha; }

    public ResponsableDePago getResponsable() { return responsable; }
    public void setResponsable(ResponsableDePago responsable) { this.responsable = responsable; }

    public List<Factura> getFacturas() { return facturas; }
    public void setFacturas(List<Factura> facturas) { this.facturas = facturas; }

    public String getTipo() { return tipo; }
    public void setTipo(String tipo) { this.tipo = tipo; }
}



// [Pago.java]
// [src/main/java/com/hotel/hotel_backend/domain/Pago.java]
package com.hotel.hotel_backend.domain;

import com.hotel.hotel_backend.domain.MedioDePago.MedioDePago;
import jakarta.persistence.*;

import java.time.LocalDate;
import java.time.LocalTime;

@Entity
@Table(name = "pago")
public class Pago {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "pago_id")
    private Integer id;

    @Column(name = "fecha", nullable = false)
    private LocalDate fecha;

    @Column(name = "hora", nullable = false)
    private LocalTime hora;

    @Column(name = "monto_total")
    private double montoTotal;

    // ===========================================
    //        MEDIO DE PAGO  (SIN CASCADE)
    // ===========================================
    @ManyToOne
    @JoinColumn(name = "medio_pago_id")
    private MedioDePago medioDePago;

    // ===========================================
    //                FACTURA  (SIN CASCADE)
    // ===========================================
    @ManyToOne
    @JoinColumn(name = "factura_id")
    private Factura factura;

    public Pago() {}

    public Pago(Integer id, LocalDate fecha, LocalTime hora,
                double montoTotal, MedioDePago medioDePago) {
        this.id = id;
        this.fecha = fecha;
        this.hora = hora;
        this.montoTotal = montoTotal;
        this.medioDePago = medioDePago;
    }

    // ===========================
    //     GETTERS / SETTERS
    // ===========================

    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }

    public LocalDate getFecha() { return fecha; }
    public void setFecha(LocalDate fecha) { this.fecha = fecha; }

    public LocalTime getHora() { return hora; }
    public void setHora(LocalTime hora) { this.hora = hora; }

    public double getMontoTotal() { return montoTotal; }
    public void setMontoTotal(double montoTotal) { this.montoTotal = montoTotal; }

    public MedioDePago getMedioDePago() { return medioDePago; }
    public void setMedioDePago(MedioDePago medioDePago) { this.medioDePago = medioDePago; }

    public Factura getFactura() { return factura; }
    public void setFactura(Factura factura) { this.factura = factura; }
}



// [Persona.java]
package com.hotel.hotel_backend.domain;

import jakarta.persistence.Embeddable;

@Embeddable
public class Persona {

    private String nombre;
    private String apellido;
    private String telefono;

    public Persona() {}

    public Persona(String nombre, String apellido, String telefono) {
        this.nombre = nombre;
        this.apellido = apellido;
        this.telefono = telefono;
    }

    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }

    public String getApellido() { return apellido; }
    public void setApellido(String apellido) { this.apellido = apellido; }

    public String getTelefono() { return telefono; }
    public void setTelefono(String telefono) { this.telefono = telefono; }
}



// [Reserva.java]
package com.hotel.hotel_backend.domain;

import jakarta.persistence.*;
import java.time.LocalDate;
import java.util.List;

@Entity
@Table(name = "reserva")
public class Reserva {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "reserva_id")
    private Integer id;

    @Column(name = "fecha_inicio", nullable = false)
    private LocalDate fechaInicio;

    @Column(name = "fecha_fin", nullable = false)
    private LocalDate fechaFin;

    // ========= TITULAR (Persona embebida) =========
    @Embedded
    @AttributeOverrides({
            @AttributeOverride(name = "nombre", column = @Column(name = "titular_nombre")),
            @AttributeOverride(name = "apellido", column = @Column(name = "titular_apellido")),
            @AttributeOverride(name = "telefono", column = @Column(name = "titular_telefono"))
    })
    private Persona titular;

    // ========= HABITACIONES =========
    @ManyToMany
    @JoinTable(
            name = "reserva_habitacion",
            joinColumns = @JoinColumn(name = "reserva_id"),
            inverseJoinColumns = @JoinColumn(name = "habitacion_numero")
    )
    private List<Habitacion> habitaciones;

    @Column(nullable = false)
    private String estado; // Pendiente - Confirmada - Reservada - Cancelada

    public Reserva() {}

    public Reserva(Integer id, LocalDate fechaInicio, LocalDate fechaFin,
                   Persona titular, List<Habitacion> habitaciones, String estado) {
        this.id = id;
        this.fechaInicio = fechaInicio;
        this.fechaFin = fechaFin;
        this.titular = titular;
        this.habitaciones = habitaciones;
        this.estado = estado;
    }

    // ========= GETTERS / SETTERS =========

    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }

    public LocalDate getFechaInicio() { return fechaInicio; }
    public void setFechaInicio(LocalDate fechaInicio) { this.fechaInicio = fechaInicio; }

    public LocalDate getFechaFin() { return fechaFin; }
    public void setFechaFin(LocalDate fechaFin) { this.fechaFin = fechaFin; }

    public Persona getTitular() { return titular; }
    public void setTitular(Persona titular) { this.titular = titular; }

    public List<Habitacion> getHabitaciones() { return habitaciones; }
    public void setHabitaciones(List<Habitacion> habitaciones) { this.habitaciones = habitaciones; }

    public String getEstado() { return estado; }
    public void setEstado(String estado) { this.estado = estado; }
}



// [ResponsableDePago/ResponsableDePago.java]
package com.hotel.hotel_backend.domain.ResponsableDePago;

import jakarta.persistence.*;

@Entity
@Table(name = "responsable_pago")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "tipo", discriminatorType = DiscriminatorType.STRING)
public abstract class ResponsableDePago {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "responsable_id")
    private Integer id;

    @Column(insertable = false, updatable = false)
    private String tipo;

    public ResponsableDePago() {}  // ‚Üê NECESARIO PARA JPA

    public Integer getId() { return id; }

    public String getTipo() { return tipo; }
}



// [ResponsableDePago/ResponsableHuesped.java]
package com.hotel.hotel_backend.domain.ResponsableDePago;

import jakarta.persistence.*;

@Entity
@DiscriminatorValue("huesped")
public class ResponsableHuesped extends ResponsableDePago {

    @Column(nullable = false)
    private String apellido;

    @Column(nullable = false)
    private String nombres;

    @Column(nullable = false)
    private String documento;

    public ResponsableHuesped() {
        super();
    }

    public String getApellido() { return apellido; }
    public void setApellido(String apellido) { this.apellido = apellido; }

    public String getNombres() { return nombres; }
    public void setNombres(String nombres) { this.nombres = nombres; }

    public String getDocumento() { return documento; }
    public void setDocumento(String documento) { this.documento = documento; }
}



// [ResponsableDePago/ResponsableJuridico.java]
package com.hotel.hotel_backend.domain.ResponsableDePago;

import jakarta.persistence.*;

@Entity
@DiscriminatorValue("juridica")
public class ResponsableJuridico extends ResponsableDePago {

    @Column(nullable = false)
    private String razonSocial;

    @Column(nullable = false)
    private String cuit;

    public ResponsableJuridico() {
        super();
    }

    public String getRazonSocial() { return razonSocial; }
    public void setRazonSocial(String razonSocial) { this.razonSocial = razonSocial; }

    public String getCuit() { return cuit; }
    public void setCuit(String cuit) { this.cuit = cuit; }
}



// [Usuario.java]
package com.hotel.hotel_backend.domain;

import jakarta.persistence.*;

@Entity
@Table(name = "usuario")
public class Usuario {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "usuario_id")
    private Integer id;

    @Column(nullable = false, unique = true)
    private String username;

    @Column(nullable = false)
    private String password; // En esta etapa se permite texto plano

    @Column(nullable = false)
    private String rol; // admin, recepcion, gerente, etc.

    public Usuario() {}

    public Usuario(Integer id, String username, String password, String rol) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.rol = rol;
    }

    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }

    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }

    public String getRol() { return rol; }
    public void setRol(String rol) { this.rol = rol; }
}



